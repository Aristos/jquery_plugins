(function(a){a.okPopup.ui={tooltip:function(){return{onInit:function(a){a.css({position:"absolute"}).addClass("tooltip")},openWhen:"mouseenter element",closeWhen:"mouseleave element",transition:"togglePuff",location:{position:{y:"top",x:"center"},registration:{y:"bottom",x:"center"},offset:{top:-5},relativeTo:"element"},content:function(a,e){return e.data("content")}}},modal:function(d){d.fitlers||(d.filters={});d.filters=a.extend({video:{matcher:/(vimeo|youtube)/,content:function(a){var c=this.data("width")||
900,b=this.data("height")||504;return'<iframe src="'+a+'?autoplay=1" width="'+c+'" height="'+b+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}},image:{matcher:/.*\.(jpe?g|gif|png)$/,content:function(a){var c=this.data("width")||"",b=this.data("height")||"";return"<img src='"+a+"' width='"+c+"' height='"+b+"' alt='' />"}}},d.fitlers);return{openWhen:"click element",closeWhen:"click .ui-modal .ui-close",content:function(e,c){var b="";a.each(d.filters,function(a,
e){if(e.matcher.test(c.attr("href")))return b=e.content.call(c,c.attr("href")),!1});return a(b)},onInit:function(e,c){e.css({position:"fixed"}).addClass("responsive modal");var b=a("#ui-overlay");0===b.length&&(b=a("<div id='ui-overlay' class='ui-overlay' />").appendTo("body").hide());b.click(function(){e.close()});e.overlay=b;a.okPopup.resizeEventBound||(a(window).resize(function(){a(".ui-popup.responsive:visible").each(function(){var b=a(this);b.positionAt(a.extend(c.location,b.data("dimensions")))})}),
a.okPopup.resizeEventBound=!0)},onOpen:function(e,c){var b=c.content,d;e.overlay.show();(d=e.find(".ui-content")).length&&d.remove();e.append(b.addClass("ui-content").hide()).stop(!0,!0);c.done(function(){var c;a.measure(b,function(){c={width:b.attr("width")||b.width(),height:b.attr("height")||b.height()};e.data("dimensions",c)});b.is("img")?b.css(c.width<=c.height?{height:"100%",width:"auto"}:{width:"100%",height:"auto"}):b.attr({width:"100%",height:"100%"})});return c.then(function(){return a.positionAt(e,
a.extend(e.data("dimensions"),c.options.location))})},onClose:function(a){a.find(".ui-content").remove();a.overlay.fadeOut()},template:"<div class='ui-modal'><header><a href='#' class='ui-close'>Close</a></header></div>",transition:"grow",location:{relativeTo:window,constrain:!0,margin:10}}},gallery:function(d){function e(a,c,e){a.preventDefault();var d=f.index(b);e?d--:d++;a.currentTarget=b=f.eq(0>d?f.length-1:d>=f.length?0:d);c.open(a)}var c,b,f=this;d=a.okPopup.ui.modal(d);c=d.onInit;return a.extend(d,
{onInit:function(b,d){var f=function(a){e(a,b)},g=function(a){e(a,b,!0)};c(b,d);a("<nav><a class='ui-prev prev' href='#'>Previous</a><a class='ui-next next' href='#'>Next</a></nav>").appendTo(b);a(".ui-prev",b).click(g);a(".ui-next",b).click(f);b.extend({nextItem:f,prevItem:g})}})}}})(jQuery);
