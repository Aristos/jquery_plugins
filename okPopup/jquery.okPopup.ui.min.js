(function(b){b.okPopup.ui={tooltip:function(){return{onInit:function(b){b.css({position:"absolute"}).addClass("tooltip")},openWhen:"mouseenter element",closeWhen:"mouseleave element",transition:"togglePuff",position:{location:"elementTop",offsetTop:-5,relativeTo:"event"},content:function(c){return b(c.currentTarget).data("content")}}},modal:function(c){c.fitlers||(c.filters={});c.filters=b.extend({video:{matcher:/(vimeo|youtube)/,content:function(b){var d=this.data("width")||900,a=this.data("height")||
504;return'<iframe src="'+b+'?autoplay=1" width="'+d+'" height="'+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}},image:{matcher:/.*\.(jpe?g|gif|png)$/,content:function(b){var d=this.data("width")||"",a=this.data("height")||"";return"<img src='"+b+"' width='"+d+"' height='"+a+"' alt='' />"}}},c.fitlers);return{openWhen:"click element",closeWhen:"click .ui-modal .ui-close",content:function(e){var d="",a=b(e.currentTarget);b.each(c.filters,function(b,f){if(f.matcher.test(a.attr("href")))return d=
f.content.call(a,a.attr("href")),!1});return b(d)},onInit:function(e,d){e.css({position:"fixed"}).addClass("responsive modal");var a=b("#ui-overlay");0===a.length&&(a=b("<div id='ui-overlay' />").appendTo("body").hide());a.click(function(a){b.okPopup.close(e,a,d)});e.overlay=a;b.okPopup.resizeEventBound||(b(window).resize(function(){b(".ui-popup.responsive:visible").each(function(){var a=b(this);a.positionAt(a.data("dimensions"))})}),b.okPopup.resizeEventBound=!0)},onOpen:function(e,d){var a=d.content,
c;e.overlay.show();(c=e.find(".ui-content")).length&&c.remove();e.append(a.addClass("ui-content").hide()).stop(!0,!0);d.done(function(){var f;b.positionAt.measure(a,function(){f={width:a.attr("width")||a.width(),height:a.attr("height")||a.height()};e.data("dimensions",b.extend(f,d.options.position))});a.is("img")?a.css(f.width<=f.height?{height:"100%",width:"auto"}:{width:"100%",height:"auto"}):a.attr({width:"100%",height:"100%"})});return d.then(function(){return b.positionAt(e,e.data("dimensions"))})},
onClose:function(b){b.find(".ui-content").remove();b.overlay.fadeOut()},template:"<div class='ui-modal'><header><a href='#' class='ui-close'>Close</a></header></div>",transition:"grow",position:{location:"centerViewport",constrain:!0,margin:20}}},gallery:function(c){function e(f,d,e){f&&f.preventDefault();var g=h.index(a);e?g--:g++;f.currentTarget=a=h.eq(0>g?h.length-1:g>=h.length?0:g);b.okPopup.open(d,f,c)}var d,a,h=this;c=b.okPopup.ui.modal(c);d=c.onInit;return b.extend(c,{onInit:function(a,c){var h=
function(b){e(b,a)},g=function(b){e(b,a,!0)};d(a,c);b("<nav><a class='ui-prev prev' href='#'>Previous</a><a class='ui-next next' href='#'>Next</a></nav>").appendTo(a);b(".ui-prev",a).click(g);b(".ui-next",a).click(h);a.extend({nextItem:h,prevItem:g})}})}}})(jQuery);
