(function(b){b.okPopup.ui={tooltip:function(b){return{onInit:function(d,b){d.css({position:"absolute"}).addClass("tooltip")},openWhen:"mouseenter element",closeWhen:"mouseleave element",transition:"bubblePuff",location:{position:{y:"top",x:"center"},registration:{y:"bottom",x:"center"},offset:{top:-5},relativeTo:"element"},content:function(d,b){return b.data("content")}}},modal:function(e){e.filters||(e.filters={});e.filters=b.extend(!0,{video:{matcher:/(vimeo|youtube)/,content:function(){var d=this.attr("href"),
b=this.data("width")||900,a=this.data("height")||504;return'<iframe src="'+d+'?autoplay=1" width="'+b+'" height="'+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}},image:{matcher:/.*\.(jpe?g|gif|png)$/,content:function(){var b=this.attr("href"),c=this.data("width")||"",a=this.data("height")||"";return"<img src='"+b+"' width='"+c+"' height='"+a+"' alt='' />"}}},e.filters);return{openWhen:"click element",closeWhen:"click .ui-modal .ui-close",content:function(d,
c){var a="";b.each(e.filters,function(b,f){if("function"==typeof f.matcher?f.matcher.call(c):f.matcher.test(c.attr("href")))return a=f.content.call(c,d),!1});return b(a)},onInit:function(d,c){d.css({position:"fixed"}).addClass("responsive modal");var a=b("#ui-overlay");0===a.length&&(a=b("<div id='ui-overlay' class='ui-overlay' />").appendTo("body").hide());a.click(function(a){d.close()});d.overlay=a;b.okPopup.resizeEventBound||(b(window).resize(function(){b(".ui-popup.responsive:visible").each(function(a){a=
b(this);a.positionAt(b.extend(c.location,a.data("dimensions")))})}),b.okPopup.resizeEventBound=!0)},onOpen:function(d,c){var a=c.content,g;d.overlay.show();(g=d.find(".ui-content")).length&&g.remove();d.append(a.addClass("ui-content").hide()).stop(!0,!0);c.done(function(){var c;b.measure(a,function(){c={width:a.attr("width")||a.width(),height:a.attr("height")||a.height()};d.data("dimensions",c)});a.is("img")?a.css(c.width<=c.height?{height:"100%",width:"auto"}:{width:"100%",height:"auto"}):a.attr({width:"100%",
height:"100%"})});return c.then(function(){return b.positionAt(d,b.extend(d.data("dimensions"),c.options.location))})},onClose:function(b,c){b.find(".ui-content").remove();b.overlay.fadeOut()},template:"<div class='ui-modal'><header><a href='#' class='ui-close'>Close</a></header></div>",transition:"grow",location:{relativeTo:window,constrain:!0,margin:10}}},gallery:function(e){function d(a,b,c){a.preventDefault();a=b.currentIndex||0;c?a--:a++;a=0>a?b.galleryItems.length-1:a>=b.galleryItems.length?
0:a;b.currentIndex=a;b.open(b.galleryItems.eq(a));e.afterMove(b,a)}var c;e=b.okPopup.ui.modal.call(this,e);c=e.onInit;return b.extend(e,{items:function(){return this},afterMove:function(a,b){},navTemplate:"<nav><a class='ui-prev prev' href='#'>Previous</a><a class='ui-next next' href='#'>Next</a></nav>",onInit:function(a,e){var f=function(b){d(b,a)},h=function(b){d(b,a,!0)};c.call(this,a,e);a.galleryItems=e.items.call(this);b(e.navTemplate).appendTo(a);b(".ui-prev",a).click(h);b(".ui-next",a).click(f);
a.extend({nextItem:f,prevItem:h})}})}}})(jQuery);
