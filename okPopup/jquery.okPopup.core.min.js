(function(c){function f(d){function a(a,b){b=c.isArray(b)?b:[b];d[a+"Effect"]=b.shift();d[a+"EffectOptions"]=b}a("in",d.openEffect);a("out",d.closeEffect);return d}c.fn.okPopup=function(d){return c.okPopup.create(this,d)};c.okPopup={create:function(d,a){var a=c.extend({openEvent:null,closeEvent:null,openEffect:"show",closeEffect:"hide",onOpen:function(a,b){b.open(a)},onClose:function(a,b){b.close()},modal:!1,parent:"body",template:"<div class='ui-popup'></div>",overlayClass:"ui-widget-overlay"},a),
e,b;a.modal&&(b=c("."+a.overlayClass),0===b.length&&(b=c("<div class='"+a.overlayClass+"' ></div>").appendTo("body").hide()));e=c(a.template).appendTo(a.parent).hide().extend({open:function(a,b){return c.okPopup.open.call(this,a,b)},close:function(){return c.okPopup.close.call(this)},overlay:b,options:f(a)});if(a.openEvent)c(d.selector).on(a.openEvent,function(a){a.preventDefault();e.options.onOpen(a,e)});if(a.closeEvent)c(d.selector).on(a.closeEvent,function(a){a.preventDefault();e.options.onClose(a,
e)});return e},open:function(d,a){var e=this,b=c.isArray(this.options.where)?this.options.where:[this.options.where];b.unshift(d.currentTarget);if(this.overlay&&(this.overlay.show(),"string"==typeof this.options.modal))this.overlay.one(this.options.modal,function(a){e.options.onClose(a,e)});"string"==typeof a?this.html(a):"function"==typeof a&&a(d,e);this.stop(!0,!0).hide();return this[this.options.openEffect].apply(this,this.options.openEffectOptions).positionAt.apply(this,b)},close:function(){this.overlay&&
this.overlay.hide();this[this.options.closeEffect].apply(this,this.options.closeEffectOptions)}}})(jQuery);
