(function(c){function f(b){function a(a,d){c.isArray(d)?(b[a+"Effect"]=d.shift(),b[a+"EffectOptions"]=d):(b[a+"Effect"]=d,b[a+"EffectOptions"]=[])}a("in",b.inEffect);a("out",b.outEffect);return b}c.fn.okPopup=function(b){return c.okPopup.create(this,b)};c.okPopup={create:function(b,a){var a=c.extend({inEffect:"show",outEffect:"hide",modal:!1,parent:"body",template:"<div class='ui-popup'></div>",overlayClass:"ui-widget-overlay"},a),e,d;a.modal&&(d=c(a.overlayClass),0===d.length&&(d=c("<div class='"+
a.overlayClass+"' ></div>").appendTo("body").hide()));e=c(a.template).appendTo(a.parent).hide().extend({open:function(a){return c.okPopup.open.call(this,a?a:b)},close:function(a){return c.okPopup.close.call(this,a?a:b)},overlay:d,options:f(a)});if(a.show)c(b.selector).on(a.show,function(a){a.preventDefault();e.open(a.currentTarget)});if(a.hide)c(b.selector).on(a.hide,function(a){a.preventDefault();e.close(a.currentTarget)});return e},open:function(b){var a=this,e=this.options.content.call(b),d=c.isArray(this.options.where)?
this.options.where:[this.options.where];d.unshift(b);if(this.overlay&&(this.overlay.show(),"string"==typeof this.options.modal))this.overlay.one(this.options.modal,function(){a.close()});this.stop(!0,!0).hide();"string"==typeof e&&this.html(e);return this[this.options.inEffect].apply(this,this.options.inEffectOptions).positionAt.apply(this,d)},close:function(){this.overlay&&this.overlay.hide();this[this.options.outEffect].apply(this,this.options.outEffectOptions)}}})(jQuery);
