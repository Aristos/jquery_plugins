(function(b){function f(d){function a(a,c){c=b.isArray(c)?c:[c];d[a+"Effect"]=c.shift();d[a+"EffectOptions"]=c}a("open",d.openEffect);a("close",d.closeEffect);return d}b.fn.okPopup=function(d){return b.okPopup.create(this,d)};b.okPopup={create:function(d,a){var a=b.extend({openEvent:null,closeEvent:null,openEffect:"show",closeEffect:"hide",onOpen:function(a,b){b.open(a)},onClose:function(a,b){b.close()},modal:!1,parent:"body",template:"<div class='ui-popup'></div>",overlayClass:"ui-overlay"},a.ui?
b.okPopup.ui[a.ui](a):null,a),e,c;a.modal&&(c=b("."+a.overlayClass),0===c.length&&(c=b("<div id='ui-overlay' class='"+a.overlayClass+"' ></div>").appendTo("body").hide()));e=b(a.template).appendTo(a.parent).hide().extend({open:function(a,c){return b.okPopup.open.call(this,a,c)},close:function(){return b.okPopup.close.call(this)},overlay:c,options:f(a)});if(a.openEvent)b(d.selector).on(a.openEvent,function(a){!0!==e.options.onOpen(a,e)&&a.preventDefault()});if(a.closeEvent)b(d.selector).on(a.closeEvent,
function(a){!0!==e.options.onClose(a,e)&&a.preventDefault()});return e},open:function(d,a){var e=this,c=b.isArray(this.options.where)?this.options.where:[this.options.where];c.unshift(this.options.modal?b(this.options.parent):d.currentTarget);if(this.overlay&&(this.overlay.show(),"string"==typeof this.options.modal))this.overlay.one(this.options.modal,function(a){e.options.onClose(a,e)});"string"==typeof a?this.html(a):"function"==typeof a&&a(d,e);this.stop(!0,!0).hide();return this[this.options.openEffect].apply(this,
this.options.openEffectOptions).positionAt.apply(this,c)},close:function(){this.overlay&&this.overlay.hide();this[this.options.closeEffect].apply(this,this.options.closeEffectOptions)}}})(jQuery);
