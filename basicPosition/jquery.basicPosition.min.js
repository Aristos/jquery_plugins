(function(d){function k(a,b,h){var e={},a=d(a),c=d(window),f=d(document),g=a.width(),j=a.height(),i=b.margin||0;b.fitToViewport&&(g>c.width()-2*i&&(b=c.width()-2*i,j*=b/g,g=b),j>c.height()-2*i&&(b=c.height()-2*i,g*=b/j,j=b));e.top=Math.max(c.height()/2-j/2+f.scrollTop(),0);e.left=Math.max(c.width()/2-g/2+f.scrollLeft(),0);if(h||a.width()>=c.width||a.height()>=c.height)e.width=g,e.height=j;return e}function i(a,b){return d.extend({},d(a).offset(),{width:a.offsetWidth,height:a.offsetHeight,elementWidth:b.offsetWidth,
elementHeight:b.offsetHeight})}d.positionAt=function(a,b,h){var e,c,f,g=d(a);f={};"string"==typeof h?c=h:d.isPlainObject(h)&&(c=h.location,e=h);e=e||{};c?(g.css({position:"absolute"}),f=d.positionAt.locations[c].call(b,a,e)):(a=e.offsetLeft||0,f=e.offsetTop||0,e=d(window).scrollTop(),h=d(window).width(),b.currentTarget?(c=b.pageX,b=b.pageY):(b=d(b).offset(),c=b.left,b=b.top),c+g.outerWidth()+2*a>=h&&(c=h-g.width()-a),b+2*f<=e&&(b=e-2*f),f={top:b+f,left:c+a});return f};d.fn.positionAt=function(a,b){return this.each(function(){d(this).css(d.positionAt(this,
a,b))})};d.positionAt.locations={elementBottom:function(a){a=i(this,a);return{top:a.top+a.height,left:a.left+a.width/2-a.elementWidth/2}},elementTop:function(a){a=i(this,a);return{top:a.top-a.elementHeight,left:a.left+a.width/2-a.elementWidth/2}},elementLeft:function(a){a=i(this,a);return{top:a.top+a.height/2-a.elementHeight/2,left:a.left-a.elementWidth}},elementRight:function(a){a=i(this,a);return{top:a.top+a.height/2-a.elementHeight/2,left:a.left+a.width}},center:function(a,b){return k.call(this,
a,b)},magnify:function(a,b){return k.call(this,a,b,!0)}}})(jQuery);
