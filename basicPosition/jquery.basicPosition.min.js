(function(d){function k(a,b){return d.extend({},d(a).offset(),{width:a.offsetWidth,height:a.offsetHeight,elementWidth:b.offsetWidth,elementHeight:b.offsetHeight})}d.positionAt=function(a,b,c){var e,g,i,h=d(a),f={},b=b instanceof jQuery?b[0]:b;"string"==typeof c?e=c:d.isPlainObject(c)&&(e=c.location,g=c);g=g||{};i=g.offsetLeft||0;c=g.offsetTop||0;e?(h.css({position:"absolute"}),f=d.positionAt.locations[e].call(b,a,g)):(a=d(window).scrollTop(),e=d(window).width(),b.currentTarget?(g=b.pageX,b=b.pageY):
(b=d(b).offset(),g=b.left,b=b.top),g+h.outerWidth()+2*i>=e&&(g=e-h.width()-i),b+2*c<=a&&(b=a-2*c),f={top:b,left:g});f.top+=c;f.left+=i;return f};d.fn.positionAt=function(a,b){return this.each(function(){d(this).css(d.positionAt(this,a,b))})};d.positionAt.locations={elementBottom:function(a){a=k(this,a);return{top:a.top+a.height,left:a.left+a.width/2-a.elementWidth/2}},elementTop:function(a){a=k(this,a);return{top:a.top-a.elementHeight,left:a.left+a.width/2-a.elementWidth/2}},elementLeft:function(a){a=
k(this,a);return{top:a.top+a.height/2-a.elementHeight/2,left:a.left-a.elementWidth}},elementRight:function(a){a=k(this,a);return{top:a.top+a.height/2-a.elementHeight/2,left:a.left+a.width}},center:function(a,b){var c=d(a),e=d(this),g="fixed"==e.css("position"),i=d(document),h=c.width(),c=c.height(),f=b.margin||10,j;!1!==b.constrain&&(h>e.width()-2*f&&(j=e.width()-2*f,c*=j/h,h=j),c>e.height()-2*f&&(j=e.height()-2*f,h*=j/c,c=j));return{width:h,height:c,top:Math.max(e.height()/2-c/2+(g?0:i.scrollTop()),
f),left:Math.max(e.width()/2-h/2+i.scrollLeft(),f)}}}})(jQuery);
