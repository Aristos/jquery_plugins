(function(c){function g(a,b,d){var c;c=a.width();var a=a.height(),e=d.margin||10;!1!==d.constrain&&(c>b.width()-2*e&&(d=b.width()-2*e,a*=d/c,c=d),a>b.height()-2*e&&(d=b.height()-2*e,c*=d/a,a=d));d=a;return{width:c,height:d,top:Math.max(0,(b.height()-d)/2+b.scrollTop()),left:Math.max(0,(b.width()-c)/2+b.scrollLeft())}}function f(a,b){return c.extend({},c(a).offset(),{width:a.offsetWidth,height:a.offsetHeight,elementWidth:b.offsetWidth,elementHeight:b.offsetHeight})}c.positionAt=function(a,b,d){var h,
e,f,g=c(a),i={},b=b instanceof jQuery?b[0]:b;"string"==typeof d?h=d:c.isPlainObject(d)&&(h=d.location,e=d);e=e||{};f=e.offsetLeft||0;d=e.offsetTop||0;h?(g.css({position:"absolute"}),i=c.positionAt.locations[h].call(b,a,e)):(a=c(window).scrollTop(),h=c(window).width(),b.currentTarget?(e=b.pageX,b=b.pageY):(b=c(b).offset(),e=b.left,b=b.top),e+g.outerWidth()+2*f>=h&&(e=h-g.width()-f),b+2*d<=a&&(b=a-2*d),i={top:b,left:e});i.top+=d;i.left+=f;return i};c.fn.positionAt=function(a,b){return this.each(function(){c(this).css(c.positionAt(this,
a,b))})};c.positionAt.locations={elementBottom:function(a){a=f(this,a);return{top:a.top+a.height,left:a.left+a.width/2-a.elementWidth/2}},elementTop:function(a){a=f(this,a);return{top:a.top-a.elementHeight,left:a.left+a.width/2-a.elementWidth/2}},elementLeft:function(a){a=f(this,a);return{top:a.top+a.height/2-a.elementHeight/2,left:a.left-a.elementWidth}},elementRight:function(a){a=f(this,a);return{top:a.top+a.height/2-a.elementHeight/2,left:a.left+a.width}},center:function(a,b){return g(c(a),c(this),
b)},centerParent:function(a,b){return g(c(a),c(this),b)},centerViewport:function(a,b){return g(c(a),c(window),b)}}})(jQuery);
